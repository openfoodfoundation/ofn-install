# Open Food Network Unicorn systemd service

[Unit]
Description=Open Food Network unicorn server

[Service]
Type=simple
User=openfoodnetwork
WorkingDirectory={{ current_path }}
Environment=RAILS_ENV={{ rails_env }}

{% if skylight_authentication is defined %}
  Environment=SKYLIGHT_AUTHENTICATION={{ skylight_authentication }}
{% endif %}

SyslogIdentifier=openfoodnetwork-unicorn
PIDFile={{ unicorn_pid }}

ExecStart={{ bundle_path }} exec unicorn -D -c {{ unicorn_config }} -E {{ rails_env }}

[Install]
WantedBy=multi-user.target
